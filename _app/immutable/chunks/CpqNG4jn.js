import"./DsnmJJEf.js";import{s as Ze,a as Wt,e as Ee,C as Xe}from"./Bv6y4PC1.js";import{a9 as Ge,aa as Ft,af as Ue,p as Be,aE as qe,o as ti,l as Ie,b as Oe,f as U,t as ot,e as ft,a as G,d as $e,i as I,u as J,a7 as K,s as Z,c as N,g as Y,m as zt,aF as Zt,r as R,j as q}from"./CJ8uedMQ.js";import{i as lt,s as ei,a as ge,b as pe}from"./DsYLNidH.js";import{e as Pe,i as Te}from"./DAVlNM77.js";import{_ as ii,p as dt,b as si}from"./D79xk7qO.js";import{p as he,i as He}from"./D6KFMBBc.js";import{g as de}from"./DJ3wCT4K.js";import{b as me}from"./BTh8YaLy.js";var x;function F(t,i,e){const r=typeof e,s=typeof t;if(r!=="undefined"){if(s!=="undefined"){if(e){if(s==="function"&&r===s)return function(l){return t(e(l))};if(i=t.constructor,i===e.constructor){if(i===Array)return e.concat(t);if(i===Map){var n=new Map(e);for(var h of t)n.set(h[0],h[1]);return n}if(i===Set){h=new Set(e);for(n of t.values())h.add(n);return h}}}return t}return e}return s==="undefined"?i:t}function xt(t,i){return typeof t>"u"?i:t}function D(){return Object.create(null)}function tt(t){return typeof t=="string"}function It(t){return typeof t=="object"}function Ot(t,i){if(tt(i))t=t[i];else for(let e=0;t&&e<i.length;e++)t=t[i[e]];return t}const ri=/[^\p{L}\p{N}]+/u,ni=/(\d{3})/g,hi=/(\D)(\d{3})/g,oi=/(\d{3})(\D)/g,ye=/[\u0300-\u036f]/g;function $t(t={}){if(!this||this.constructor!==$t)return new $t(...arguments);if(arguments.length)for(t=0;t<arguments.length;t++)this.assign(arguments[t]);else this.assign(t)}x=$t.prototype;x.assign=function(t){this.normalize=F(t.normalize,!0,this.normalize);let i=t.include,e=i||t.exclude||t.split,r;if(e||e===""){if(typeof e=="object"&&e.constructor!==RegExp){let s="";r=!i,i||(s+="\\p{Z}"),e.letter&&(s+="\\p{L}"),e.number&&(s+="\\p{N}",r=!!i),e.symbol&&(s+="\\p{S}"),e.punctuation&&(s+="\\p{P}"),e.control&&(s+="\\p{C}"),(e=e.char)&&(s+=typeof e=="object"?e.join(""):e);try{this.split=new RegExp("["+(i?"^":"")+s+"]+","u")}catch{this.split=/\s+/}}else this.split=e,r=e===!1||"a1a".split(e).length<2;this.numeric=F(t.numeric,r)}else{try{this.split=F(this.split,ri)}catch{this.split=/\s+/}this.numeric=F(t.numeric,F(this.numeric,!0))}if(this.prepare=F(t.prepare,null,this.prepare),this.finalize=F(t.finalize,null,this.finalize),e=t.filter,this.filter=typeof e=="function"?e:F(e&&new Set(e),null,this.filter),this.dedupe=F(t.dedupe,!0,this.dedupe),this.matcher=F((e=t.matcher)&&new Map(e),null,this.matcher),this.mapper=F((e=t.mapper)&&new Map(e),null,this.mapper),this.stemmer=F((e=t.stemmer)&&new Map(e),null,this.stemmer),this.replacer=F(t.replacer,null,this.replacer),this.minlength=F(t.minlength,1,this.minlength),this.maxlength=F(t.maxlength,1024,this.maxlength),this.rtl=F(t.rtl,!1,this.rtl),(this.cache=e=F(t.cache,!0,this.cache))&&(this.F=null,this.L=typeof e=="number"?e:2e5,this.B=new Map,this.D=new Map,this.I=this.H=128),this.h="",this.J=null,this.A="",this.K=null,this.matcher)for(const s of this.matcher.keys())this.h+=(this.h?"|":"")+s;if(this.stemmer)for(const s of this.stemmer.keys())this.A+=(this.A?"|":"")+s;return this};x.addStemmer=function(t,i){return this.stemmer||(this.stemmer=new Map),this.stemmer.set(t,i),this.A+=(this.A?"|":"")+t,this.K=null,this.cache&&mt(this),this};x.addFilter=function(t){return typeof t=="function"?this.filter=t:(this.filter||(this.filter=new Set),this.filter.add(t)),this.cache&&mt(this),this};x.addMapper=function(t,i){return typeof t=="object"?this.addReplacer(t,i):t.length>1?this.addMatcher(t,i):(this.mapper||(this.mapper=new Map),this.mapper.set(t,i),this.cache&&mt(this),this)};x.addMatcher=function(t,i){return typeof t=="object"?this.addReplacer(t,i):t.length<2&&(this.dedupe||this.mapper)?this.addMapper(t,i):(this.matcher||(this.matcher=new Map),this.matcher.set(t,i),this.h+=(this.h?"|":"")+t,this.J=null,this.cache&&mt(this),this)};x.addReplacer=function(t,i){return typeof t=="string"?this.addMatcher(t,i):(this.replacer||(this.replacer=[]),this.replacer.push(t,i),this.cache&&mt(this),this)};x.encode=function(t,i){if(this.cache&&t.length<=this.H)if(this.F){if(this.B.has(t))return this.B.get(t)}else this.F=setTimeout(mt,50,this);this.normalize&&(typeof this.normalize=="function"?t=this.normalize(t):t=ye?t.normalize("NFKD").replace(ye,"").toLowerCase():t.toLowerCase()),this.prepare&&(t=this.prepare(t)),this.numeric&&t.length>3&&(t=t.replace(hi,"$1 $2").replace(oi,"$1 $2").replace(ni,"$1 "));const e=!(this.dedupe||this.mapper||this.filter||this.matcher||this.stemmer||this.replacer);let r=[],s=D(),n,h,l=this.split||this.split===""?t.split(this.split):[t];for(let f=0,u,c;f<l.length;f++)if((u=c=l[f])&&!(u.length<this.minlength||u.length>this.maxlength)){if(i){if(s[u])continue;s[u]=1}else{if(n===u)continue;n=u}if(e)r.push(u);else if(!this.filter||(typeof this.filter=="function"?this.filter(u):!this.filter.has(u))){if(this.cache&&u.length<=this.I)if(this.F){var o=this.D.get(u);if(o||o===""){o&&r.push(o);continue}}else this.F=setTimeout(mt,50,this);if(this.stemmer){this.K||(this.K=new RegExp("(?!^)("+this.A+")$"));let d;for(;d!==u&&u.length>2;)d=u,u=u.replace(this.K,a=>this.stemmer.get(a))}if(u&&(this.mapper||this.dedupe&&u.length>1)){o="";for(let d=0,a="",m,g;d<u.length;d++)m=u.charAt(d),m===a&&this.dedupe||((g=this.mapper&&this.mapper.get(m))||g===""?g===a&&this.dedupe||!(a=g)||(o+=g):o+=a=m);u=o}if(this.matcher&&u.length>1&&(this.J||(this.J=new RegExp("("+this.h+")","g")),u=u.replace(this.J,d=>this.matcher.get(d))),u&&this.replacer)for(o=0;u&&o<this.replacer.length;o+=2)u=u.replace(this.replacer[o],this.replacer[o+1]);if(this.cache&&c.length<=this.I&&(this.D.set(c,u),this.D.size>this.L&&(this.D.clear(),this.I=this.I/1.1|0)),u){if(u!==c)if(i){if(s[u])continue;s[u]=1}else{if(h===u)continue;h=u}r.push(u)}}}return this.finalize&&(r=this.finalize(r)||r),this.cache&&t.length<=this.H&&(this.B.set(t,r),this.B.size>this.L&&(this.B.clear(),this.H=this.H/1.1|0)),r};function mt(t){t.F=null,t.B.clear(),t.D.clear()}function oe(t,i,e){e||(i||typeof t!="object"?typeof i=="object"&&(e=i,i=0):e=t),e&&(t=e.query||t,i=e.limit||i);let r=""+(i||0);e&&(r+=(e.offset||0)+!!e.context+!!e.suggest+(e.resolve!==!1)+(e.resolution||this.resolution)+(e.boost||0)),t=(""+t).toLowerCase(),this.cache||(this.cache=new wt);let s=this.cache.get(t+r);if(!s){const n=e&&e.cache;n&&(e.cache=!1),s=this.search(t,i,e),n&&(e.cache=n),this.cache.set(t+r,s)}return s}function wt(t){this.limit=t&&t!==!0?t:1e3,this.cache=new Map,this.h=""}wt.prototype.set=function(t,i){this.cache.set(this.h=t,i),this.cache.size>this.limit&&this.cache.delete(this.cache.keys().next().value)};wt.prototype.get=function(t){const i=this.cache.get(t);return i&&this.h!==t&&(this.cache.delete(t),this.cache.set(this.h=t,i)),i};wt.prototype.remove=function(t){for(const i of this.cache){const e=i[0];i[1].includes(t)&&this.cache.delete(e)}};wt.prototype.clear=function(){this.cache.clear(),this.h=""};const we={normalize:!1,numeric:!1,dedupe:!1},Tt={},Et=new Map([["b","p"],["v","f"],["w","f"],["z","s"],["x","s"],["d","t"],["n","m"],["c","k"],["g","k"],["j","k"],["q","k"],["i","e"],["y","e"],["u","o"]]),xe=new Map([["ae","a"],["oe","o"],["sh","s"],["kh","k"],["th","t"],["ph","f"],["pf","f"]]),ve=[/([^aeo])h(.)/g,"$1$2",/([aeo])h([^aeo]|$)/g,"$1$2",/(.)\1+/g,"$1"],ke={a:"",e:"",i:"",o:"",u:"",y:"",b:1,f:1,p:1,v:1,c:2,g:2,j:2,k:2,q:2,s:2,x:2,z:2,ÃŸ:2,d:3,t:3,l:4,m:5,n:5,r:6};var Ke={Exact:we,Default:Tt,Normalize:Tt,LatinBalance:{mapper:Et},LatinAdvanced:{mapper:Et,matcher:xe,replacer:ve},LatinExtra:{mapper:Et,replacer:ve.concat([/(?!^)[aeo]/g,""]),matcher:xe},LatinSoundex:{dedupe:!1,include:{letter:!0},finalize:function(t){for(let e=0;e<t.length;e++){var i=t[e];let r=i.charAt(0),s=ke[r];for(let n=1,h;n<i.length&&(h=i.charAt(n),h==="h"||h==="w"||!(h=ke[h])||h===s||(r+=h,s=h,r.length!==4));n++);t[e]=r}}},CJK:{split:""},LatinExact:we,LatinDefault:Tt,LatinSimple:Tt};function be(t,i,e,r){let s=[];for(let n=0,h;n<t.index.length;n++)if(h=t.index[n],i>=h.length)i-=h.length;else{i=h[r?"splice":"slice"](i,e);const l=i.length;if(l&&(s=s.length?s.concat(i):i,e-=l,r&&(t.length-=l),!e))break;i=0}return s}function jt(t){if(!this||this.constructor!==jt)return new jt(t);this.index=t?[t]:[],this.length=t?t.length:0;const i=this;return new Proxy([],{get(e,r){if(r==="length")return i.length;if(r==="push")return function(s){i.index[i.index.length-1].push(s),i.length++};if(r==="pop")return function(){if(i.length)return i.length--,i.index[i.index.length-1].pop()};if(r==="indexOf")return function(s){let n=0;for(let h=0,l,o;h<i.index.length;h++){if(l=i.index[h],o=l.indexOf(s),o>=0)return n+o;n+=l.length}return-1};if(r==="includes")return function(s){for(let n=0;n<i.index.length;n++)if(i.index[n].includes(s))return!0;return!1};if(r==="slice")return function(s,n){return be(i,s||0,n||i.length,!1)};if(r==="splice")return function(s,n){return be(i,s||0,n||i.length,!0)};if(r==="constructor")return Array;if(typeof r!="symbol")return(e=i.index[r/2**31|0])&&e[r]},set(e,r,s){return e=r/2**31|0,(i.index[e]||(i.index[e]=[]))[r]=s,i.length++,!0}})}jt.prototype.clear=function(){this.index.length=0};jt.prototype.push=function(){};function et(t=8){if(!this||this.constructor!==et)return new et(t);this.index=D(),this.h=[],this.size=0,t>32?(this.B=Le,this.A=BigInt(t)):(this.B=Re,this.A=t)}et.prototype.get=function(t){const i=this.index[this.B(t)];return i&&i.get(t)};et.prototype.set=function(t,i){var e=this.B(t);let r=this.index[e];r?(e=r.size,r.set(t,i),(e-=r.size)&&this.size++):(this.index[e]=r=new Map([[t,i]]),this.h.push(r),this.size++)};function it(t=8){if(!this||this.constructor!==it)return new it(t);this.index=D(),this.h=[],this.size=0,t>32?(this.B=Le,this.A=BigInt(t)):(this.B=Re,this.A=t)}it.prototype.add=function(t){var i=this.B(t);let e=this.index[i];e?(i=e.size,e.add(t),(i-=e.size)&&this.size++):(this.index[i]=e=new Set([t]),this.h.push(e),this.size++)};x=et.prototype;x.has=it.prototype.has=function(t){const i=this.index[this.B(t)];return i&&i.has(t)};x.delete=it.prototype.delete=function(t){const i=this.index[this.B(t)];i&&i.delete(t)&&this.size--};x.clear=it.prototype.clear=function(){this.index=D(),this.h=[],this.size=0};x.values=it.prototype.values=function*(){for(let t=0;t<this.h.length;t++)for(let i of this.h[t].values())yield i};x.keys=it.prototype.keys=function*(){for(let t=0;t<this.h.length;t++)for(let i of this.h[t].keys())yield i};x.entries=it.prototype.entries=function*(){for(let t=0;t<this.h.length;t++)for(let i of this.h[t].entries())yield i};function Re(t){let i=2**this.A-1;if(typeof t=="number")return t&i;let e=0,r=this.A+1;for(let s=0;s<t.length;s++)e=(e*r^t.charCodeAt(s))&i;return this.A===32?e+2**31:e}function Le(t){let i=BigInt(2)**this.A-BigInt(1);var e=typeof t;if(e==="bigint")return t&i;if(e==="number")return BigInt(t)&i;e=BigInt(0);let r=this.A+BigInt(1);for(let s=0;s<t.length;s++)e=(e*r^BigInt(t.charCodeAt(s)))&i;return e}let vt,Ct;async function li(t){t=t.data;var i=t.task;const e=t.id;let r=t.args;switch(i){case"init":Ct=t.options||{},(i=t.factory)?(Function("return "+i)()(self),vt=new self.FlexSearch.Index(Ct),delete self.FlexSearch):vt=new rt(Ct),postMessage({id:e});break;default:let s;i==="export"&&(r[1]?(r[0]=Ct.export,r[2]=0,r[3]=1):r=null),i==="import"?r[0]&&(t=await Ct.import.call(vt,r[0]),vt.import(r[0],t)):((s=r&&vt[i].apply(vt,r))&&s.then&&(s=await s),s&&s.await&&(s=await s.await),i==="search"&&s.result&&(s=s.result)),postMessage(i==="search"?{id:e,msg:s}:{id:e})}}function le(t){kt.call(t,"add"),kt.call(t,"append"),kt.call(t,"search"),kt.call(t,"update"),kt.call(t,"remove"),kt.call(t,"searchCache")}let Ut,_e,Lt;function fi(){Ut=Lt=0}function kt(t){this[t+"Async"]=function(){const i=arguments;var e=i[i.length-1];let r;if(typeof e=="function"&&(r=e,delete i[i.length-1]),Ut?Lt||(Lt=Date.now()-_e>=this.priority*this.priority*3):(Ut=setTimeout(fi,0),_e=Date.now()),Lt){const n=this;return new Promise(h=>{setTimeout(function(){h(n[t+"Async"].apply(n,i))},0)})}const s=this[t].apply(this,i);return e=s.then?s:new Promise(n=>n(s)),r&&e.then(r),e}}let ut=0;function Mt(t={},i){function e(l){function o(f){f=f.data||f;const u=f.id,c=u&&n.h[u];c&&(c(f.msg),delete n.h[u])}if(this.worker=l,this.h=D(),this.worker)return s?this.worker.on("message",o):this.worker.onmessage=o,t.config?new Promise(function(f){ut>1e9&&(ut=0),n.h[++ut]=function(){f(n)},n.worker.postMessage({id:ut,task:"init",factory:r,options:t})}):(this.priority=t.priority||4,this.encoder=i||null,this.worker.postMessage({task:"init",factory:r,options:t}),this)}if(!this||this.constructor!==Mt)return new Mt(t);let r=typeof self<"u"?self._factory:typeof window<"u"?window._factory:null;r&&(r=r.toString());const s=typeof window>"u",n=this,h=ui(r,s,t.worker);return h.then?h.then(function(l){return e.call(n,l)}):e.call(this,h)}ct("add");ct("append");ct("search");ct("update");ct("remove");ct("clear");ct("export");ct("import");Mt.prototype.searchCache=oe;le(Mt.prototype);function ct(t){Mt.prototype[t]=function(){const i=this,e=[].slice.call(arguments);var r=e[e.length-1];let s;return typeof r=="function"&&(s=r,e.pop()),r=new Promise(function(n){t==="export"&&typeof e[0]=="function"&&(e[0]=null),ut>1e9&&(ut=0),i.h[++ut]=n,i.worker.postMessage({task:t,id:ut,args:e})}),s?(r.then(s),this):r}}function ui(t,i,e){return i?typeof module<"u"?new(require("worker_threads")).Worker(__dirname+"/worker/node.js"):ii(()=>import("./BIHI7g3E.js"),[],import.meta.url).then(function(r){return new r.Worker(import.meta.dirname+"/node/node.mjs")}):t?new window.Worker(URL.createObjectURL(new Blob(["onmessage="+li.toString()],{type:"text/javascript"}))):new window.Worker(typeof e=="string"?e:import.meta.url.replace("/worker.js","/worker/worker.js").replace("flexsearch.bundle.module.min.js","module/worker/worker.js").replace("flexsearch.bundle.module.min.mjs","module/worker/worker.js"),{type:"module"})}yt.prototype.add=function(t,i,e){if(It(t)&&(i=t,t=Ot(i,this.key)),i&&(t||t===0)){if(!e&&this.reg.has(t))return this.update(t,i);for(let l=0,o;l<this.field.length;l++){o=this.B[l];var r=this.index.get(this.field[l]);if(typeof o=="function"){var s=o(i);s&&r.add(t,s,e,!0)}else s=o.G,(!s||s(i))&&(o.constructor===String?o=[""+o]:tt(o)&&(o=[o]),te(i,o,this.D,0,r,t,o[0],e))}if(this.tag)for(r=0;r<this.A.length;r++){var n=this.A[r];s=this.tag.get(this.F[r]);let l=D();if(typeof n=="function"){if(n=n(i),!n)continue}else{var h=n.G;if(h&&!h(i))continue;n.constructor===String&&(n=""+n),n=Ot(i,n)}if(s&&n){tt(n)&&(n=[n]);for(let o=0,f,u;o<n.length;o++)if(f=n[o],!l[f]&&(l[f]=1,(h=s.get(f))?u=h:s.set(f,u=[]),!e||!u.includes(t))){if(u.length===2**31-1){if(h=new jt(u),this.fastupdate)for(let c of this.reg.values())c.includes(u)&&(c[c.indexOf(u)]=h);s.set(f,u=h)}u.push(t),this.fastupdate&&((h=this.reg.get(t))?h.push(u):this.reg.set(t,[u]))}}}if(this.store&&(!e||!this.store.has(t))){let l;if(this.h){l=D();for(let o=0,f;o<this.h.length;o++){if(f=this.h[o],(e=f.G)&&!e(i))continue;let u;if(typeof f=="function"){if(u=f(i),!u)continue;f=[f.O]}else if(tt(f)||f.constructor===String){l[f]=i[f];continue}qt(i,l,f,0,f[0],u)}}this.store.set(t,l||i)}this.worker&&(this.fastupdate||this.reg.add(t))}return this};function qt(t,i,e,r,s,n){if(t=t[s],r===e.length-1)i[s]=n||t;else if(t)if(t.constructor===Array)for(i=i[s]=Array(t.length),s=0;s<t.length;s++)qt(t,i,e,r,s);else i=i[s]||(i[s]=D()),s=e[++r],qt(t,i,e,r,s)}function te(t,i,e,r,s,n,h,l){if(t=t[h])if(r===i.length-1){if(t.constructor===Array){if(e[r]){for(i=0;i<t.length;i++)s.add(n,t[i],!0,!0);return}t=t.join(" ")}s.add(n,t,l,!0)}else if(t.constructor===Array)for(h=0;h<t.length;h++)te(t,i,e,r,s,n,h,l);else h=i[++r],te(t,i,e,r,s,n,h,l)}function fe(t,i,e,r){if(!t.length)return t;if(t.length===1)return t=t[0],t=e||t.length>i?t.slice(e,e+i):t,r?bt.call(this,t):t;let s=[];for(let n=0,h,l;n<t.length;n++)if((h=t[n])&&(l=h.length)){if(e){if(e>=l){e-=l;continue}h=h.slice(e,e+i),l=h.length,e=0}if(l>i&&(h=h.slice(0,i),l=i),!s.length&&l>=i)return r?bt.call(this,h):h;if(s.push(h),i-=l,!i)break}return s=s.length>1?[].concat.apply([],s):s[0],r?bt.call(this,s):s}function Yt(t,i,e,r){var s=r[0];if(s[0]&&s[0].query)return t[i].apply(t,s);if(!(i!=="and"&&i!=="not"||t.result.length||t.await||s.suggest))return r.length>1&&(s=r[r.length-1]),(r=s.resolve)?t.await||t.result:t;let n=[],h=0,l=0,o,f,u,c,d;for(i=0;i<r.length;i++)if(s=r[i]){var a=void 0;if(s.constructor===H)a=s.await||s.result;else if(s.then||s.constructor===Array)a=s;else{h=s.limit||0,l=s.offset||0,u=s.suggest,f=s.resolve,o=((c=s.highlight||t.highlight)||s.enrich)&&f,a=s.queue;let m=s.async||a,g=s.index,p=s.query;if(g?t.index||(t.index=g):g=t.index,p||s.tag){const v=s.field||s.pluck;if(v&&(!p||t.query&&!c||(t.query=p,t.field=v,t.highlight=c),g=g.index.get(v)),a&&(d||t.await)){d=1;let y;const _=t.C.length,S=new Promise(function(z){y=z});(function(z,A){S.h=function(){A.index=null,A.resolve=!1;let M=m?z.searchAsync(A):z.search(A);return M.then?M.then(function(k){return t.C[_]=k=k.result||k,y(k),k}):(M=M.result||M,y(M),M)}})(g,Object.assign({},s)),t.C.push(S),n[i]=S;continue}else s.resolve=!1,s.index=null,a=m?g.searchAsync(s):g.search(s),s.resolve=f,s.index=g}else if(s.and)a=Ht(s,"and",g);else if(s.or)a=Ht(s,"or",g);else if(s.not)a=Ht(s,"not",g);else if(s.xor)a=Ht(s,"xor",g);else continue}a.await?(d=1,a=a.await):a.then?(d=1,a=a.then(function(m){return m.result||m})):a=a.result||a,n[i]=a}if(d&&!t.await&&(t.await=new Promise(function(m){t.return=m})),d){const m=Promise.all(n).then(function(g){for(let p=0;p<t.C.length;p++)if(t.C[p]===m){t.C[p]=function(){return e.call(t,g,h,l,o,f,u,c)};break}ue(t)});t.C.push(m)}else if(t.await)t.C.push(function(){return e.call(t,n,h,l,o,f,u,c)});else return e.call(t,n,h,l,o,f,u,c);return f?t.await||t.result:t}function Ht(t,i,e){t=t[i];const r=t[0]||t;return r.index||(r.index=e),e=new H(r),t.length>1&&(e=e[i].apply(e,t.slice(1))),e}H.prototype.or=function(){return Yt(this,"or",ci,arguments)};function ci(t,i,e,r,s,n,h){return t.length&&(this.result.length&&t.push(this.result),t.length<2?this.result=t[0]:(this.result=Ne(t,i,e,!1,this.h),e=0)),s&&(this.await=null),s?this.resolve(i,e,r,h):this}H.prototype.and=function(){return Yt(this,"and",ai,arguments)};function ai(t,i,e,r,s,n,h){if(!n&&!this.result.length)return s?this.result:this;let l;if(t.length)if(this.result.length&&t.unshift(this.result),t.length<2)this.result=t[0];else{let o=0;for(let f=0,u,c;f<t.length;f++)if((u=t[f])&&(c=u.length))o<c&&(o=c);else if(!n){o=0;break}o?(this.result=Dt(t,o,i,e,n,this.h,s),l=!0):this.result=[]}else n||(this.result=t);return s&&(this.await=null),s?this.resolve(i,e,r,h,l):this}H.prototype.xor=function(){return Yt(this,"xor",gi,arguments)};function gi(t,i,e,r,s,n,h){if(t.length)if(this.result.length&&t.unshift(this.result),t.length<2)this.result=t[0];else{t:{n=e;var l=this.h;const o=[],f=D();let u=0;for(let c=0,d;c<t.length;c++)if(d=t[c]){u<d.length&&(u=d.length);for(let a=0,m;a<d.length;a++)if(m=d[a])for(let g=0,p;g<m.length;g++)p=m[g],f[p]=f[p]?2:1}for(let c=0,d,a=0;c<u;c++)for(let m=0,g;m<t.length;m++)if((g=t[m])&&(d=g[c])){for(let p=0,v;p<d.length;p++)if(v=d[p],f[v]===1)if(n)n--;else if(s){if(o.push(v),o.length===i){t=o;break t}}else{const y=c+(m?l:0);if(o[y]||(o[y]=[]),o[y].push(v),++a===i){t=o;break t}}}t=o}this.result=t,l=!0}else n||(this.result=t);return s&&(this.await=null),s?this.resolve(i,e,r,h,l):this}H.prototype.not=function(){return Yt(this,"not",pi,arguments)};function pi(t,i,e,r,s,n,h){if(!n&&!this.result.length)return s?this.result:this;if(t.length&&this.result.length){t:{n=e;var l=[];t=new Set(t.flat().flat());for(let o=0,f,u=0;o<this.result.length;o++)if(f=this.result[o]){for(let c=0,d;c<f.length;c++)if(d=f[c],!t.has(d)){if(n)n--;else if(s){if(l.push(d),l.length===i){t=l;break t}}else if(l[o]||(l[o]=[]),l[o].push(d),++u===i){t=l;break t}}}t=l}this.result=t,l=!0}return s&&(this.await=null),s?this.resolve(i,e,r,h,l):this}function Nt(t,i,e,r,s){let n,h,l;typeof s=="string"?(n=s,s=""):n=s.template,h=n.indexOf("$1"),l=n.substring(h+2),h=n.substring(0,h);let o=s&&s.boundary,f=!s||s.clip!==!1,u=s&&s.merge&&l&&h&&new RegExp(l+" "+h,"g");s=s&&s.ellipsis;var c=0;if(typeof s=="object"){var d=s.template;c=d.length-2,s=s.pattern}typeof s!="string"&&(s=s===!1?"":"..."),c&&(s=d.replace("$1",s)),d=s.length-c;let a,m;typeof o=="object"&&(a=o.before,a===0&&(a=-1),m=o.after,m===0&&(m=-1),o=o.total||9e5),c=new Map;for(let X=0,E,gt,st;X<i.length;X++){let b;if(r)b=i,st=r;else{var g=i[X];if(st=g.field,!st)continue;b=g.result}gt=e.get(st),E=gt.encoder,g=c.get(E),typeof g!="string"&&(g=E.encode(t),c.set(E,g));for(let O=0;O<b.length;O++){var p=b[O].doc;if(!p||(p=Ot(p,st),!p))continue;var v=p.trim().split(/\s+/);if(!v.length)continue;p="";var y=[];let L=[];for(var _=-1,S=-1,z=0,A=0;A<v.length;A++){var M=v[A],k=E.encode(M);k=k.length>1?k.join(" "):k[0];let w;if(k&&M){for(var j=M.length,$=(E.split?M.replace(E.split,""):M).length-k.length,B="",W=0,V=0;V<g.length;V++){var Q=g[V];if(Q){var P=Q.length;P+=$<0?0:$,W&&P<=W||(Q=k.indexOf(Q),Q>-1&&(B=(Q?M.substring(0,Q):"")+h+M.substring(Q,Q+P)+l+(Q+P<j?M.substring(Q+P):""),W=P,w=!0))}}B&&(o&&(_<0&&(_=p.length+(p?1:0)),S=p.length+(p?1:0)+B.length,z+=j,L.push(y.length),y.push({match:B})),p+=(p?" ":"")+B)}if(!w)M=v[A],p+=(p?" ":"")+M,o&&y.push({text:M});else if(o&&z>=o)break}if(z=L.length*(n.length-2),a||m||o&&p.length-z>o)if(z=o+z-d*2,A=S-_,a>0&&(A+=a),m>0&&(A+=m),A<=z)v=a?_-(a>0?a:0):_-((z-A)/2|0),y=m?S+(m>0?m:0):v+z,f||(v>0&&p.charAt(v)!==" "&&p.charAt(v-1)!==" "&&(v=p.indexOf(" ",v),v<0&&(v=0)),y<p.length&&p.charAt(y-1)!==" "&&p.charAt(y)!==" "&&(y=p.lastIndexOf(" ",y),y<S?y=S:++y)),p=(v?s:"")+p.substring(v,y)+(y<p.length?s:"");else{for(S=[],_={},z={},A={},M={},k={},B=$=j=0,V=W=1;;){var C=void 0;for(let w=0,T;w<L.length;w++){if(T=L[w],B)if($!==B){if(A[w+1])continue;if(T+=B,_[T]){j-=d,z[w+1]=1,A[w+1]=1;continue}if(T>=y.length-1){if(T>=y.length){A[w+1]=1,T>=v.length&&(z[w+1]=1);continue}j-=d}if(p=y[T].text,P=m&&k[w])if(P>0){if(p.length>P)if(A[w+1]=1,f)p=p.substring(0,P);else continue;(P-=p.length)||(P=-1),k[w]=P}else{A[w+1]=1;continue}if(j+p.length+1<=o)p=" "+p,S[w]+=p;else if(f)C=o-j-1,C>0&&(p=" "+p.substring(0,C),S[w]+=p),A[w+1]=1;else{A[w+1]=1;continue}}else{if(A[w])continue;if(T-=$,_[T]){j-=d,A[w]=1,z[w]=1;continue}if(T<=0){if(T<0){A[w]=1,z[w]=1;continue}j-=d}if(p=y[T].text,P=a&&M[w])if(P>0){if(p.length>P)if(A[w]=1,f)p=p.substring(p.length-P);else continue;(P-=p.length)||(P=-1),M[w]=P}else{A[w]=1;continue}if(j+p.length+1<=o)p+=" ",S[w]=p+S[w];else if(f)C=p.length+1-(o-j),C>=0&&C<p.length&&(p=p.substring(C)+" ",S[w]=p+S[w]),A[w]=1;else{A[w]=1;continue}}else{p=y[T].match,a&&(M[w]=a),m&&(k[w]=m),w&&j++;let nt;if(T?!w&&d&&(j+=d):(z[w]=1,A[w]=1),T>=v.length-1||T<y.length-1&&y[T+1].match?nt=1:d&&(j+=d),j-=n.length-2,!w||j+p.length<=o)S[w]=p;else{C=W=V=z[w]=0;break}nt&&(z[w+1]=1,A[w+1]=1)}j+=p.length,C=_[T]=1}if(C)$===B?B++:$++;else{if($===B?W=0:V=0,!W&&!V)break;W?($++,B=$):B++}}p="";for(let w=0,T;w<S.length;w++)T=(z[w]?w?" ":"":(w&&!s?" ":"")+s)+S[w],p+=T;s&&!z[S.length]&&(p+=s)}u&&(p=p.replace(u," ")),b[O].highlight=p}if(r)break}return i}function H(t,i){if(!this||this.constructor!==H)return new H(t,i);let e=0,r,s,n,h,l,o;if(t&&t.index){const f=t;if(i=f.index,e=f.boost||0,s=f.query){n=f.field||f.pluck,h=f.highlight;const u=f.resolve;t=f.async||f.queue,f.resolve=!1,f.index=null,t=t?i.searchAsync(f):i.search(f),f.resolve=u,f.index=i,t=t.result||t}else t=[]}if(t&&t.then){const f=this;t=t.then(function(u){f.C[0]=f.result=u.result||u,ue(f)}),r=[t],t=[],l=new Promise(function(u){o=u})}this.index=i||null,this.result=t||[],this.h=e,this.C=r||[],this.await=l||null,this.return=o||null,this.highlight=h||null,this.query=s||"",this.field=n||""}x=H.prototype;x.limit=function(t){if(this.await){const i=this;this.C.push(function(){return i.limit(t).result})}else if(this.result.length){const i=[];for(let e=0,r;e<this.result.length;e++)if(r=this.result[e])if(r.length<=t){if(i[e]=r,t-=r.length,!t)break}else{i[e]=r.slice(0,t);break}this.result=i}return this};x.offset=function(t){if(this.await){const i=this;this.C.push(function(){return i.offset(t).result})}else if(this.result.length){const i=[];for(let e=0,r;e<this.result.length;e++)(r=this.result[e])&&(r.length<=t?t-=r.length:(i[e]=r.slice(t),t=0));this.result=i}return this};x.boost=function(t){if(this.await){const i=this;this.C.push(function(){return i.boost(t).result})}else this.h+=t;return this};function ue(t,i){let e=t.result;var r=t.await;t.await=null;for(let s=0,n;s<t.C.length;s++)if(n=t.C[s]){if(typeof n=="function")e=n(),t.C[s]=e=e.result||e,s--;else if(n.h)e=n.h(),t.C[s]=e=e.result||e,s--;else if(n.then)return t.await=r}return r=t.return,t.C=[],t.return=null,i||r(e),e}x.resolve=function(t,i,e,r,s){let n=this.await?ue(this,!0):this.result;if(n.then){const h=this;return n.then(function(){return h.resolve(t,i,e,r,s)})}return n.length&&(typeof t=="object"?(r=t.highlight||this.highlight,e=!!r||t.enrich,i=t.offset,t=t.limit):(r=r||this.highlight,e=!!r||e),n=s?e?bt.call(this.index,n):n:fe.call(this.index,n,t||100,i,e)),this.finalize(n,r)};x.finalize=function(t,i){if(t.then){const r=this;return t.then(function(s){return r.finalize(s,i)})}i&&t.length&&this.query&&(t=Nt(this.query,t,this.index.index,this.field,i));const e=this.return;return this.highlight=this.index=this.result=this.C=this.await=this.return=null,this.query=this.field="",e&&e(t),t};function Dt(t,i,e,r,s,n,h){const l=t.length;let o=[],f,u;f=D();for(let c=0,d,a,m,g;c<i;c++)for(let p=0;p<l;p++)if(m=t[p],c<m.length&&(d=m[c]))for(let v=0;v<d.length;v++){if(a=d[v],(u=f[a])?f[a]++:(u=0,f[a]=1),g=o[u]||(o[u]=[]),!h){let y=c+(p||!s?0:n||0);g=g[y]||(g[y]=[])}if(g.push(a),h&&e&&u===l-1&&g.length-r===e)return r?g.slice(r):g}if(t=o.length)if(s)o=o.length>1?Ne(o,e,r,h,n):(o=o[0])&&e&&o.length>e||r?o.slice(r,e+r):o;else{if(t<l)return[];if(o=o[t-1],e||r)if(h)(o.length>e||r)&&(o=o.slice(r,e+r));else{s=[];for(let c=0,d;c<o.length;c++)if(d=o[c]){if(r&&d.length>r)r-=d.length;else if((e&&d.length>e||r)&&(d=d.slice(r,e+r),e-=d.length,r&&(r-=d.length)),s.push(d),!e)break}o=s}}return o}function Ne(t,i,e,r,s){const n=[],h=D();let l;var o=t.length;let f;if(r){for(s=o-1;s>=0;s--)if(f=(r=t[s])&&r.length){for(o=0;o<f;o++)if(l=r[o],!h[l]){if(h[l]=1,e)e--;else if(n.push(l),n.length===i)return n}}}else for(let u=o-1,c,d=0;u>=0;u--){c=t[u];for(let a=0;a<c.length;a++)if(f=(r=c[a])&&r.length){for(let m=0;m<f;m++)if(l=r[m],!h[l])if(h[l]=1,e)e--;else{let g=(a+(u<o-1&&s||0))/(u+1)|0;if((n[g]||(n[g]=[])).push(l),++d===i)return n}}}return n}function di(t,i,e,r,s){const n=D(),h=[];for(let l=0,o;l<i.length;l++){o=i[l];for(let f=0;f<o.length;f++)n[o[f]]=1}if(s){for(let l=0,o;l<t.length;l++)if(o=t[l],n[o]){if(r)r--;else if(h.push(o),n[o]=0,e&&--e===0)break}}else for(let l=0,o,f;l<t.result.length;l++)for(o=t.result[l],i=0;i<o.length;i++)f=o[i],n[f]&&((h[l]||(h[l]=[])).push(f),n[f]=0);return h}yt.prototype.search=function(t,i,e,r){e||(!i&&It(t)?(e=t,t=""):It(i)&&(e=i,i=0));let s=[];var n=[];let h,l,o,f,u,c,d=0,a=!0,m;if(e){e.constructor===Array&&(e={index:e}),t=e.query||t,h=e.pluck,l=e.merge,f=e.boost,c=h||e.field||(c=e.index)&&(c.index?null:c);var g=this.tag&&e.tag;o=e.suggest,a=e.resolve!==!1,u=e.cache,m=a&&this.store&&e.highlight;var p=!!m||a&&this.store&&e.enrich;i=e.limit||i;var v=e.offset||0;if(i||(i=a?100:0),g&&(!this.db||!r)){g.constructor!==Array&&(g=[g]);var y=[];for(let M=0,k;M<g.length;M++)if(k=g[M],k.field&&k.tag){var _=k.tag;if(_.constructor===Array)for(var S=0;S<_.length;S++)y.push(k.field,_[S]);else y.push(k.field,_)}else{_=Object.keys(k);for(let j=0,$,B;j<_.length;j++)if($=_[j],B=k[$],B.constructor===Array)for(S=0;S<B.length;S++)y.push($,B[S]);else y.push($,B)}if(g=y,!t){if(n=[],y.length)for(g=0;g<y.length;g+=2){if(this.db){if(r=this.index.get(y[g]),!r)continue;n.push(r=r.db.tag(y[g+1],i,v,p))}else r=mi.call(this,y[g],y[g+1],i,v,p);s.push(a?{field:y[g],tag:y[g+1],result:r}:[r])}if(n.length){const M=this;return Promise.all(n).then(function(k){for(let j=0;j<k.length;j++)a?s[j].result=k[j]:s[j]=k[j];return a?s:new H(s.length>1?Dt(s,1,0,0,o,f):s[0],M)})}return a?s:new H(s.length>1?Dt(s,1,0,0,o,f):s[0],this)}}a||h||!(c=c||this.field)||(tt(c)?h=c:(c.constructor===Array&&c.length===1&&(c=c[0]),h=c.field||c.index)),c&&c.constructor!==Array&&(c=[c])}c||(c=this.field);let z;y=(this.worker||this.db)&&!r&&[];for(let M=0,k,j,$;M<c.length;M++){if(j=c[M],this.db&&this.tag&&!this.B[M])continue;let B;if(tt(j)||(B=j,j=B.field,t=B.query||t,i=xt(B.limit,i),v=xt(B.offset,v),o=xt(B.suggest,o),m=a&&this.store&&xt(B.highlight,m),p=!!m||a&&this.store&&xt(B.enrich,p),u=xt(B.cache,u)),r)k=r[M];else{_=B||e||{},S=_.enrich;var A=this.index.get(j);if(g&&(this.db&&(_.tag=g,_.field=c,z=A.db.support_tag_search),!z&&S&&(_.enrich=!1),z||(_.limit=0,_.offset=0)),k=u?A.searchCache(t,g&&!z?0:i,_):A.search(t,g&&!z?0:i,_),g&&!z&&(_.limit=i,_.offset=v),S&&(_.enrich=S),y){y[M]=k;continue}}if($=(k=k.result||k)&&k.length,g&&$){if(_=[],S=0,this.db&&r){if(!z)for(A=c.length;A<r.length;A++){let W=r[A];if(W&&W.length)S++,_.push(W);else if(!o)return a?s:new H(s,this)}}else for(let W=0,V,Q;W<g.length;W+=2){if(V=this.tag.get(g[W]),!V){if(o)continue;return a?s:new H(s,this)}if(Q=(V=V&&V.get(g[W+1]))&&V.length)S++,_.push(V);else if(!o)return a?s:new H(s,this)}if(S){if(k=di(k,_,i,v,a),$=k.length,!$&&!o)return a?k:new H(k,this);S--}}if($)n[d]=j,s.push(k),d++;else if(c.length===1)return a?s:new H(s,this)}if(y){if(this.db&&g&&g.length&&!z)for(p=0;p<g.length;p+=2){if(n=this.index.get(g[p]),!n){if(o)continue;return a?s:new H(s,this)}y.push(n.db.tag(g[p+1],i,v,!1))}const M=this;return Promise.all(y).then(function(k){return e&&(e.resolve=a),k.length&&(k=M.search(t,i,e,k)),k})}if(!d)return a?s:new H(s,this);if(h&&(!p||!this.store))return s=s[0],a?s:new H(s,this);for(y=[],v=0;v<n.length;v++){if(g=s[v],p&&g.length&&typeof g[0].doc>"u"&&(this.db?y.push(g=this.index.get(this.field[0]).db.enrich(g)):g=bt.call(this,g)),h)return a?m?Nt(t,g,this.index,h,m):g:new H(g,this);s[v]={field:n[v],result:g}}if(p&&this.db&&y.length){const M=this;return Promise.all(y).then(function(k){for(let j=0;j<k.length;j++)s[j].result=k[j];return m&&(s=Nt(t,s,M.index,h,m)),l?je(s):s})}return m&&(s=Nt(t,s,this.index,h,m)),l?je(s):s};function je(t){const i=[],e=D(),r=D();for(let s=0,n,h,l,o,f,u,c;s<t.length;s++){n=t[s],h=n.field,l=n.result;for(let d=0;d<l.length;d++)f=l[d],typeof f!="object"?f={id:o=f}:o=f.id,(u=e[o])?u.push(h):(f.field=e[o]=[h],i.push(f)),(c=f.highlight)&&(u=r[o],u||(r[o]=u={},f.highlight=u),u[h]=c)}return i}function mi(t,i,e,r,s){return t=this.tag.get(t),t?(t=t.get(i),t?(i=t.length-r,i>0&&((e&&i>e||r)&&(t=t.slice(r,r+e)),s&&(t=bt.call(this,t))),t):[]):[]}function bt(t){if(!this||!this.store)return t;if(this.db)return this.index.get(this.field[0]).db.enrich(t);const i=Array(t.length);for(let e=0,r;e<t.length;e++)r=t[e],i[e]={id:r,doc:this.store.get(r)};return i}function yt(t){if(!this||this.constructor!==yt)return new yt(t);const i=t.document||t.doc||t;let e,r;if(this.B=[],this.field=[],this.D=[],this.key=(e=i.key||i.id)&&Vt(e,this.D)||"id",(r=t.keystore||0)&&(this.keystore=r),this.fastupdate=!!t.fastupdate,this.reg=!this.fastupdate||t.worker||t.db?r?new it(r):new Set:r?new et(r):new Map,this.h=(e=i.store||null)&&e&&e!==!0&&[],this.store=e?r?new et(r):new Map:null,this.cache=(e=t.cache||null)&&new wt(e),t.cache=!1,this.worker=t.worker||!1,this.priority=t.priority||4,this.index=yi.call(this,t,i),this.tag=null,(e=i.tag)&&(typeof e=="string"&&(e=[e]),e.length)){this.tag=new Map,this.A=[],this.F=[];for(let s=0,n,h;s<e.length;s++){if(n=e[s],h=n.field||n,!h)throw Error("The tag field from the document descriptor is undefined.");n.custom?this.A[s]=n.custom:(this.A[s]=Vt(h,this.D),n.filter&&(typeof this.A[s]=="string"&&(this.A[s]=new String(this.A[s])),this.A[s].G=n.filter)),this.F[s]=h,this.tag.set(h,new Map)}}if(this.worker){this.fastupdate=!1,t=[];for(const s of this.index.values())s.then&&t.push(s);if(t.length){const s=this;return Promise.all(t).then(function(n){let h=0;for(const l of s.index.entries()){const o=l[0];let f=l[1];f.then&&(f=n[h],s.index.set(o,f),h++)}return s})}}else t.db&&(this.fastupdate=!1,this.mount(t.db))}x=yt.prototype;x.mount=function(t){let i=this.field;if(this.tag)for(let n=0,h;n<this.F.length;n++){h=this.F[n];var e=void 0;this.index.set(h,e=new rt({},this.reg)),i===this.field&&(i=i.slice(0)),i.push(h),e.tag=this.tag.get(h)}e=[];const r={db:t.db,type:t.type,fastupdate:t.fastupdate};for(let n=0,h,l;n<i.length;n++){r.field=l=i[n],h=this.index.get(l);const o=new t.constructor(t.id,r);o.id=t.id,e[n]=o.mount(h),h.document=!0,n?h.bypass=!0:h.store=this.store}const s=this;return this.db=Promise.all(e).then(function(){s.db=!0})};x.commit=async function(){const t=[];for(const i of this.index.values())t.push(i.commit());await Promise.all(t),this.reg.clear()};x.destroy=function(){const t=[];for(const i of this.index.values())t.push(i.destroy());return Promise.all(t)};function yi(t,i){const e=new Map;let r=i.index||i.field||i;tt(r)&&(r=[r]);for(let n=0,h,l;n<r.length;n++){if(h=r[n],tt(h)||(l=h,h=h.field),l=It(l)?Object.assign({},t,l):t,this.worker){var s=void 0;s=(s=l.encoder)&&s.encode?s:new $t(typeof s=="string"?Ke[s]:s||{}),s=new Mt(l,s),e.set(h,s)}this.worker||e.set(h,new rt(l,this.reg)),l.custom?this.B[n]=l.custom:(this.B[n]=Vt(h,this.D),l.filter&&(typeof this.B[n]=="string"&&(this.B[n]=new String(this.B[n])),this.B[n].G=l.filter)),this.field[n]=h}if(this.h){t=i.store,tt(t)&&(t=[t]);for(let n=0,h,l;n<t.length;n++)h=t[n],l=h.field||h,h.custom?(this.h[n]=h.custom,h.custom.O=l):(this.h[n]=Vt(l,this.D),h.filter&&(typeof this.h[n]=="string"&&(this.h[n]=new String(this.h[n])),this.h[n].G=h.filter))}return e}function Vt(t,i){const e=t.split(":");let r=0;for(let s=0;s<e.length;s++)t=e[s],t[t.length-1]==="]"&&(t=t.substring(0,t.length-2))&&(i[r]=!0),t&&(e[r++]=t);return r<e.length&&(e.length=r),r>1?e:e[0]}x.append=function(t,i){return this.add(t,i,!0)};x.update=function(t,i){return this.remove(t).add(t,i)};x.remove=function(t){It(t)&&(t=Ot(t,this.key));for(var i of this.index.values())i.remove(t,!0);if(this.reg.has(t)){if(this.tag&&!this.fastupdate)for(let e of this.tag.values())for(let r of e){i=r[0];const s=r[1],n=s.indexOf(t);n>-1&&(s.length>1?s.splice(n,1):e.delete(i))}this.store&&this.store.delete(t),this.reg.delete(t)}return this.cache&&this.cache.remove(t),this};x.clear=function(){const t=[];for(const i of this.index.values()){const e=i.clear();e.then&&t.push(e)}if(this.tag)for(const i of this.tag.values())i.clear();return this.store&&this.store.clear(),this.cache&&this.cache.clear(),t.length?Promise.all(t):this};x.contain=function(t){return this.db?this.index.get(this.field[0]).db.has(t):this.reg.has(t)};x.cleanup=function(){for(const t of this.index.values())t.cleanup();return this};x.get=function(t){return this.db?this.index.get(this.field[0]).db.enrich(t).then(function(i){return i[0]&&i[0].doc||null}):this.store.get(t)||null};x.set=function(t,i){return typeof t=="object"&&(i=t,t=Ot(i,this.key)),this.store.set(t,i),this};x.searchCache=oe;x.export=wi;x.import=xi;le(yt.prototype);function ce(t,i=0){let e=[],r=[];i&&(i=25e4/i*5e3|0);for(const s of t.entries())r.push(s),r.length===i&&(e.push(r),r=[]);return r.length&&e.push(r),e}function ae(t,i){i||(i=new Map);for(let e=0,r;e<t.length;e++)r=t[e],i.set(r[0],r[1]);return i}function We(t,i=0){let e=[],r=[];i&&(i=25e4/i*1e3|0);for(const s of t.entries())r.push([s[0],ce(s[1])[0]||[]]),r.length===i&&(e.push(r),r=[]);return r.length&&e.push(r),e}function De(t,i){i||(i=new Map);for(let e=0,r,s;e<t.length;e++)r=t[e],s=i.get(r[0]),i.set(r[0],ae(r[1],s));return i}function Ve(t){let i=[],e=[];for(const r of t.keys())e.push(r),e.length===25e4&&(i.push(e),e=[]);return e.length&&i.push(e),i}function Qe(t,i){i||(i=new Set);for(let e=0;e<t.length;e++)i.add(t[e]);return i}function Qt(t,i,e,r,s,n,h=0){const l=r&&r.constructor===Array;var o=l?r.shift():r;if(!o)return this.export(t,i,s,n+1);if((o=t((i?i+".":"")+(h+1)+"."+e,JSON.stringify(o)))&&o.then){const f=this;return o.then(function(){return Qt.call(f,t,i,e,l?r:null,s,n,h+1)})}return Qt.call(this,t,i,e,l?r:null,s,n,h+1)}function wi(t,i,e=0,r=0){if(e<this.field.length){const h=this.field[e];if((i=this.index.get(h).export(t,h,e,r=1))&&i.then){const l=this;return i.then(function(){return l.export(t,h,e+1)})}return this.export(t,h,e+1)}let s,n;switch(r){case 0:s="reg",n=Ve(this.reg),i=null;break;case 1:s="tag",n=this.tag&&We(this.tag,this.reg.size),i=null;break;case 2:s="doc",n=this.store&&ce(this.store),i=null;break;default:return}return Qt.call(this,t,i,s,n||null,e,r)}function xi(t,i){var e=t.split(".");e[e.length-1]==="json"&&e.pop();const r=e.length>2?e[0]:"";if(e=e.length>2?e[2]:e[1],this.worker&&r)return this.index.get(r).import(t);if(i){if(typeof i=="string"&&(i=JSON.parse(i)),r)return this.index.get(r).import(e,i);switch(e){case"reg":this.fastupdate=!1,this.reg=Qe(i,this.reg);for(let s=0,n;s<this.field.length;s++)n=this.index.get(this.field[s]),n.fastupdate=!1,n.reg=this.reg;if(this.worker){i=[];for(const s of this.index.values())i.push(s.import(t));return Promise.all(i)}break;case"tag":this.tag=De(i,this.tag);break;case"doc":this.store=ae(i,this.store)}}}function Me(t,i){let e="";for(const r of t.entries()){t=r[0];const s=r[1];let n="";for(let h=0,l;h<s.length;h++){l=s[h]||[""];let o="";for(let f=0;f<l.length;f++)o+=(o?",":"")+(i==="string"?'"'+l[f]+'"':l[f]);o="["+o+"]",n+=(n?",":"")+o}n='["'+t+'",['+n+"]]",e+=(e?",":"")+n}return e}rt.prototype.remove=function(t,i){const e=this.reg.size&&(this.fastupdate?this.reg.get(t):this.reg.has(t));if(e){if(this.fastupdate){for(let r=0,s,n;r<e.length;r++)if((s=e[r])&&(n=s.length))if(s[n-1]===t)s.pop();else{const h=s.indexOf(t);h>=0&&s.splice(h,1)}}else Pt(this.map,t),this.depth&&Pt(this.ctx,t);i||this.reg.delete(t)}return this.db&&(this.commit_task.push({del:t}),this.M&&Je(this)),this.cache&&this.cache.remove(t),this};function Pt(t,i){let e=0;var r=typeof i>"u";if(t.constructor===Array){for(let s=0,n,h,l;s<t.length;s++)if((n=t[s])&&n.length){if(r)return 1;if(h=n.indexOf(i),h>=0){if(n.length>1)return n.splice(h,1),1;if(delete t[s],e)return 1;l=1}else{if(l)return 1;e++}}}else for(let s of t.entries())r=s[0],Pt(s[1],i)?e++:t.delete(r);return e}const vi={memory:{resolution:1},performance:{resolution:3,fastupdate:!0,context:{depth:1,resolution:1}},match:{tokenize:"forward"},score:{resolution:9,context:{depth:2,resolution:3}}};rt.prototype.add=function(t,i,e,r){if(i&&(t||t===0)){if(!r&&!e&&this.reg.has(t))return this.update(t,i);r=this.depth,i=this.encoder.encode(i,!r);const f=i.length;if(f){const u=D(),c=D(),d=this.resolution;for(let a=0;a<f;a++){let m=i[this.rtl?f-1-a:a];var s=m.length;if(s&&(r||!c[m])){var n=this.score?this.score(i,m,a,null,0):Kt(d,f,a),h="";switch(this.tokenize){case"tolerant":if(ht(this,c,m,n,t,e),s>2){for(let g=1,p,v,y,_;g<s-1;g++)p=m.charAt(g),v=m.charAt(g+1),y=m.substring(0,g)+v,_=m.substring(g+2),h=y+p+_,ht(this,c,h,n,t,e),h=y+_,ht(this,c,h,n,t,e);ht(this,c,m.substring(0,m.length-1),n,t,e)}break;case"full":if(s>2){for(let g=0,p;g<s;g++)for(n=s;n>g;n--){h=m.substring(g,n),p=this.rtl?s-1-g:g;var l=this.score?this.score(i,m,a,h,p):Kt(d,f,a,s,p);ht(this,c,h,l,t,e)}break}case"bidirectional":case"reverse":if(s>1){for(l=s-1;l>0;l--){h=m[this.rtl?s-1-l:l]+h;var o=this.score?this.score(i,m,a,h,l):Kt(d,f,a,s,l);ht(this,c,h,o,t,e)}h=""}case"forward":if(s>1){for(l=0;l<s;l++)h+=m[this.rtl?s-1-l:l],ht(this,c,h,n,t,e);break}default:if(ht(this,c,m,n,t,e),r&&f>1&&a<f-1)for(s=this.N,h=m,n=Math.min(r+1,this.rtl?a+1:f-a),l=1;l<n;l++){m=i[this.rtl?f-1-a-l:a+l],o=this.bidirectional&&m>h;const g=this.score?this.score(i,h,a,m,l-1):Kt(s+(f/2>s?0:1),f,a,n-1,l-1);ht(this,u,o?h:m,g,t,e,o?m:h)}}}}this.fastupdate||this.reg.add(t)}}return this.db&&(this.commit_task.push(e?{ins:t}:{del:t}),this.M&&Je(this)),this};function ht(t,i,e,r,s,n,h){let l,o;if(!(l=i[e])||h&&!l[h]){if(h?(i=l||(i[e]=D()),i[h]=1,o=t.ctx,(l=o.get(h))?o=l:o.set(h,o=t.keystore?new et(t.keystore):new Map)):(o=t.map,i[e]=1),(l=o.get(e))?o=l:o.set(e,o=l=[]),n){for(let f=0,u;f<l.length;f++)if((u=l[f])&&u.includes(s)){if(f<=r)return;u.splice(u.indexOf(s),1),t.fastupdate&&(i=t.reg.get(s))&&i.splice(i.indexOf(u),1);break}}if(o=o[r]||(o[r]=[]),o.push(s),o.length===2**31-1){if(i=new jt(o),t.fastupdate)for(let f of t.reg.values())f.includes(o)&&(f[f.indexOf(o)]=i);l[r]=o=i}t.fastupdate&&((r=t.reg.get(s))?r.push(o):t.reg.set(s,[o]))}}function Kt(t,i,e,r,s){return e&&t>1?i+(r||0)<=t?e+(s||0):(t-1)/(i+(r||0))*(e+(s||0))+1|0:0}rt.prototype.search=function(t,i,e){if(e||(i||typeof t!="object"?typeof i=="object"&&(e=i,i=0):(e=t,t="")),e&&e.cache)return e.cache=!1,t=this.searchCache(t,i,e),e.cache=!0,t;let r=[],s,n,h,l=0,o,f,u,c,d;e&&(t=e.query||t,i=e.limit||i,l=e.offset||0,n=e.context,h=e.suggest,d=(o=e.resolve)&&e.enrich,u=e.boost,c=e.resolution,f=this.db&&e.tag),typeof o>"u"&&(o=this.resolve),n=this.depth&&n!==!1;let a=this.encoder.encode(t,!n);if(s=a.length,i=i||(o?100:0),s===1)return Ae.call(this,a[0],"",i,l,o,d,f);if(s===2&&n&&!h)return Ae.call(this,a[1],a[0],i,l,o,d,f);let m=D(),g=0,p;if(n&&(p=a[0],g=1),c||c===0||(c=p?this.N:this.resolution),this.db){if(this.db.search&&(e=this.db.search(this,a,i,l,h,o,d,f),e!==!1))return e;const v=this;return(async function(){for(let y,_;g<s;g++){if((_=a[g])&&!m[_]){if(m[_]=1,y=await ee(v,_,p,0,0,!1,!1),y=Ce(y,r,h,c)){r=y;break}p&&(h&&y&&r.length||(p=_))}h&&p&&g===s-1&&!r.length&&(c=v.resolution,p="",g=-1,m=D())}return Se(r,c,i,l,h,u,o)})()}for(let v,y;g<s;g++){if((y=a[g])&&!m[y]){if(m[y]=1,v=ee(this,y,p,0,0,!1,!1),v=Ce(v,r,h,c)){r=v;break}p&&(h&&v&&r.length||(p=y))}h&&p&&g===s-1&&!r.length&&(c=this.resolution,p="",g=-1,m=D())}return Se(r,c,i,l,h,u,o)};function Se(t,i,e,r,s,n,h){let l=t.length,o=t;if(l>1)o=Dt(t,i,e,r,s,n,h);else if(l===1)return h?fe.call(null,t[0],e,r):new H(t[0],this);return h?o:new H(o,this)}function Ae(t,i,e,r,s,n,h){return t=ee(this,t,i,e,r,s,n,h),this.db?t.then(function(l){return s?l||[]:new H(l,this)}):t&&t.length?s?fe.call(this,t,e,r):new H(t,this):s?[]:new H([],this)}function Ce(t,i,e,r){let s=[];if(t&&t.length){if(t.length<=r){i.push(t);return}for(let n=0,h;n<r;n++)(h=t[n])&&(s[n]=h);if(s.length){i.push(s);return}}if(!e)return s}function ee(t,i,e,r,s,n,h,l){let o;return e&&(o=t.bidirectional&&i>e)&&(o=e,e=i,i=o),t.db?t.db.get(i,e,r,s,n,h,l):(t=e?(t=t.ctx.get(e))&&t.get(i):t.map.get(i),t)}function rt(t,i){if(!this||this.constructor!==rt)return new rt(t);if(t){var e=tt(t)?t:t.preset;e&&(t=Object.assign({},vi[e],t))}else t={};e=t.context;const r=e===!0?{depth:1}:e||{},s=tt(t.encoder)?Ke[t.encoder]:t.encode||t.encoder||{};this.encoder=s.encode?s:typeof s=="object"?new $t(s):{encode:s},this.resolution=t.resolution||9,this.tokenize=e=(e=t.tokenize)&&e!=="default"&&e!=="exact"&&e||"strict",this.depth=e==="strict"&&r.depth||0,this.bidirectional=r.bidirectional!==!1,this.fastupdate=!!t.fastupdate,this.score=t.score||null,(e=t.keystore||0)&&(this.keystore=e),this.map=e?new et(e):new Map,this.ctx=e?new et(e):new Map,this.reg=i||(this.fastupdate?e?new et(e):new Map:e?new it(e):new Set),this.N=r.resolution||3,this.rtl=s.rtl||t.rtl||!1,this.cache=(e=t.cache||null)&&new wt(e),this.resolve=t.resolve!==!1,(e=t.db)&&(this.db=this.mount(e)),this.M=t.commit!==!1,this.commit_task=[],this.commit_timer=null,this.priority=t.priority||4}x=rt.prototype;x.mount=function(t){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),t.mount(this)};x.commit=function(){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.commit(this)};x.destroy=function(){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.destroy()};function Je(t){t.commit_timer||(t.commit_timer=setTimeout(function(){t.commit_timer=null,t.db.commit(t)},1))}x.clear=function(){return this.map.clear(),this.ctx.clear(),this.reg.clear(),this.cache&&this.cache.clear(),this.db?(this.commit_timer&&clearTimeout(this.commit_timer),this.commit_timer=null,this.commit_task=[],this.db.clear()):this};x.append=function(t,i){return this.add(t,i,!0)};x.contain=function(t){return this.db?this.db.has(t):this.reg.has(t)};x.update=function(t,i){const e=this,r=this.remove(t);return r&&r.then?r.then(()=>e.add(t,i)):this.add(t,i)};x.cleanup=function(){return this.fastupdate?(Pt(this.map),this.depth&&Pt(this.ctx),this):this};x.searchCache=oe;x.export=function(t,i,e=0,r=0){let s,n;switch(r){case 0:s="reg",n=Ve(this.reg);break;case 1:s="cfg",n=null;break;case 2:s="map",n=ce(this.map,this.reg.size);break;case 3:s="ctx",n=We(this.ctx,this.reg.size);break;default:return}return Qt.call(this,t,i,s,n,e,r)};x.import=function(t,i){if(i)switch(typeof i=="string"&&(i=JSON.parse(i)),t=t.split("."),t[t.length-1]==="json"&&t.pop(),t.length===3&&t.shift(),t=t.length>1?t[1]:t[0],t){case"reg":this.fastupdate=!1,this.reg=Qe(i,this.reg);break;case"map":this.map=ae(i,this.map);break;case"ctx":this.ctx=De(i,this.ctx)}};x.serialize=function(t=!0){let i="",e="",r="";if(this.reg.size){let n;for(var s of this.reg.keys())n||(n=typeof s),i+=(i?",":"")+(n==="string"?'"'+s+'"':s);i="index.reg=new Set(["+i+"]);",e=Me(this.map,n),e="index.map=new Map(["+e+"]);";for(const h of this.ctx.entries()){s=h[0];let l=Me(h[1],n);l="new Map(["+l+"])",l='["'+s+'",'+l+"]",r+=(r?",":"")+l}r="index.ctx=new Map(["+r+"]);"}return t?"function inject(index){"+i+e+r+"}":i+e+r};le(rt.prototype);const Fe=typeof window<"u"&&(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),Jt=["map","ctx","tag","reg","cfg"],pt=D();function ie(t,i={}){if(!this||this.constructor!==ie)return new ie(t,i);typeof t=="object"&&(i=t,t=t.name),t||console.info("Default storage space was used, because a name was not passed."),this.id="flexsearch"+(t?":"+t.toLowerCase().replace(/[^a-z0-9_\-]/g,""):""),this.field=i.field?i.field.toLowerCase().replace(/[^a-z0-9_\-]/g,""):"",this.type=i.type,this.fastupdate=this.support_tag_search=!1,this.db=null,this.h={}}x=ie.prototype;x.mount=function(t){return t.index?t.mount(this):(t.db=this,this.open())};x.open=function(){if(this.db)return this.db;let t=this;navigator.storage&&navigator.storage.persist&&navigator.storage.persist(),pt[t.id]||(pt[t.id]=[]),pt[t.id].push(t.field);const i=Fe.open(t.id,1);return i.onupgradeneeded=function(){const e=t.db=this.result;for(let r=0,s;r<Jt.length;r++){s=Jt[r];for(let n=0,h;n<pt[t.id].length;n++)h=pt[t.id][n],e.objectStoreNames.contains(s+(s!=="reg"&&h?":"+h:""))||e.createObjectStore(s+(s!=="reg"&&h?":"+h:""))}},t.db=at(i,function(e){t.db=e,t.db.onversionchange=function(){t.close()}})};x.close=function(){this.db&&this.db.close(),this.db=null};x.destroy=function(){const t=Fe.deleteDatabase(this.id);return at(t)};x.clear=function(){const t=[];for(let e=0,r;e<Jt.length;e++){r=Jt[e];for(let s=0,n;s<pt[this.id].length;s++)n=pt[this.id][s],t.push(r+(r!=="reg"&&n?":"+n:""))}const i=this.db.transaction(t,"readwrite");for(let e=0;e<t.length;e++)i.objectStore(t[e]).clear();return at(i)};x.get=function(t,i,e=0,r=0,s=!0,n=!1){t=this.db.transaction((i?"ctx":"map")+(this.field?":"+this.field:""),"readonly").objectStore((i?"ctx":"map")+(this.field?":"+this.field:"")).get(i?i+":"+t:t);const h=this;return at(t).then(function(l){let o=[];if(!l||!l.length)return o;if(s){if(!e&&!r&&l.length===1)return l[0];for(let f=0,u;f<l.length;f++)if((u=l[f])&&u.length){if(r>=u.length){r-=u.length;continue}const c=e?r+Math.min(u.length-r,e):u.length;for(let d=r;d<c;d++)o.push(u[d]);if(r=0,o.length===e)break}return n?h.enrich(o):o}return l})};x.tag=function(t,i=0,e=0,r=!1){t=this.db.transaction("tag"+(this.field?":"+this.field:""),"readonly").objectStore("tag"+(this.field?":"+this.field:"")).get(t);const s=this;return at(t).then(function(n){return!n||!n.length||e>=n.length?[]:!i&&!e?n:(n=n.slice(e,e+i),r?s.enrich(n):n)})};x.enrich=function(t){typeof t!="object"&&(t=[t]);const i=this.db.transaction("reg","readonly").objectStore("reg"),e=[];for(let r=0;r<t.length;r++)e[r]=at(i.get(t[r]));return Promise.all(e).then(function(r){for(let s=0;s<r.length;s++)r[s]={id:t[s],doc:r[s]?JSON.parse(r[s]):null};return r})};x.has=function(t){return t=this.db.transaction("reg","readonly").objectStore("reg").getKey(t),at(t).then(function(i){return!!i})};x.search=null;x.info=function(){};x.transaction=function(t,i,e){t+=t!=="reg"&&this.field?":"+this.field:"";let r=this.h[t+":"+i];if(r)return e.call(this,r);let s=this.db.transaction(t,i);this.h[t+":"+i]=r=s.objectStore(t);const n=e.call(this,r);return this.h[t+":"+i]=null,at(s).finally(function(){return n})};x.commit=async function(t){let i=t.commit_task,e=[];t.commit_task=[];for(let r=0,s;r<i.length;r++)s=i[r],s.del&&e.push(s.del);e.length&&await this.remove(e),t.reg.size&&(await this.transaction("map","readwrite",function(r){for(const s of t.map){const n=s[0],h=s[1];h.length&&(r.get(n).onsuccess=function(){let l=this.result;var o;if(l&&l.length){const f=Math.max(l.length,h.length);for(let u=0,c,d;u<f;u++)if((d=h[u])&&d.length){if((c=l[u])&&c.length)for(o=0;o<d.length;o++)c.push(d[o]);else l[u]=d;o=1}}else l=h,o=1;o&&r.put(l,n)})}}),await this.transaction("ctx","readwrite",function(r){for(const s of t.ctx){const n=s[0],h=s[1];for(const l of h){const o=l[0],f=l[1];f.length&&(r.get(n+":"+o).onsuccess=function(){let u=this.result;var c;if(u&&u.length){const d=Math.max(u.length,f.length);for(let a=0,m,g;a<d;a++)if((g=f[a])&&g.length){if((m=u[a])&&m.length)for(c=0;c<g.length;c++)m.push(g[c]);else u[a]=g;c=1}}else u=f,c=1;c&&r.put(u,n+":"+o)})}}}),t.store?await this.transaction("reg","readwrite",function(r){for(const s of t.store){const n=s[0],h=s[1];r.put(typeof h=="object"?JSON.stringify(h):1,n)}}):t.bypass||await this.transaction("reg","readwrite",function(r){for(const s of t.reg.keys())r.put(1,s)}),t.tag&&await this.transaction("tag","readwrite",function(r){for(const s of t.tag){const n=s[0],h=s[1];h.length&&(r.get(n).onsuccess=function(){let l=this.result;l=l&&l.length?l.concat(h):h,r.put(l,n)})}}),t.map.clear(),t.ctx.clear(),t.tag&&t.tag.clear(),t.store&&t.store.clear(),t.document||t.reg.clear())};function Xt(t,i,e){const r=t.value;let s,n=0;for(let h=0,l;h<r.length;h++){if(l=e?r:r[h]){for(let o=0,f,u;o<i.length;o++)if(u=i[o],f=l.indexOf(u),f>=0)if(s=1,l.length>1)l.splice(f,1);else{r[h]=[];break}n+=l.length}if(e)break}n?s&&t.update(r):t.delete(),t.continue()}x.remove=function(t){return typeof t!="object"&&(t=[t]),Promise.all([this.transaction("map","readwrite",function(i){i.openCursor().onsuccess=function(){const e=this.result;e&&Xt(e,t)}}),this.transaction("ctx","readwrite",function(i){i.openCursor().onsuccess=function(){const e=this.result;e&&Xt(e,t)}}),this.transaction("tag","readwrite",function(i){i.openCursor().onsuccess=function(){const e=this.result;e&&Xt(e,t,!0)}}),this.transaction("reg","readwrite",function(i){for(let e=0;e<t.length;e++)i.delete(t[e])})])};function at(t,i){return new Promise((e,r)=>{t.onsuccess=t.oncomplete=function(){i&&i(this.result),i=null,e(this.result)},t.onerror=t.onblocked=r,t=null})}const ki={Document:yt},se=new ki.Document({document:{id:"id",index:["title","abstract","authors","keywords"]},tokenize:"forward",threshold:1,resolution:9,depth:3,cache:100}),_t=Ft(""),Bt=Ft([]),Rt=Ft(!1),re=Ft("");let ne=0;he.subscribe(t=>{if(t.length>0&&t.length!==ne){try{se.clear()}catch{}let i=0;t.forEach(e=>{try{se.add({id:e.id,title:e.title,abstract:e.abstract||"",authors:e.authors.join(" "),keywords:e.keywords.join(" ")}),i++}catch(r){console.error("Error adding paper to search index:",e.id,r)}}),ne=t.length}});function Gt(t){if(_t.set(t),Rt.set(!0),!t||t.trim()===""){Bt.set([]),Rt.set(!1);return}if(ne===0){Bt.set([]),Rt.set(!1);return}try{const i=se.search(t,{limit:100,enrich:!0,suggest:!0}),e=Ue(he),r=new Map(e.map(h=>[h.id,h])),s=new Map;Array.isArray(i)&&i.forEach(h=>{h&&h.result&&h.result.forEach(o=>{const f=typeof o=="string"?o:o.id,u=r.get(f);u&&(s.has(f)?s.get(f).score++:s.set(f,{paper:u,score:1,highlights:{}}))})});const n=Array.from(s.values()).sort((h,l)=>l.score-h.score);Bt.set(n),re.set(t)}catch(i){console.error("Search error:",i),Bt.set([]),re.set(t)}Rt.set(!1)}const bi=Ge([_t,he],([t,i])=>{if(!t||t.length<2)return[];const e=new Set;i.forEach(s=>{s.title.toLowerCase().split(/\s+/).forEach(h=>{h.length>3&&e.add(h)}),s.keywords.forEach(h=>{e.add(h.toLowerCase())})});const r=t.toLowerCase();return Array.from(e).filter(s=>s.startsWith(r)).slice(0,10)});function ze(){_t.set(""),Bt.set([]),re.set("")}var _i=U('<button type="button" class="absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200" aria-label="Clear search"><svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg></button>'),ji=U('<button type="button"><svg class="h-4 w-4 text-gray-400" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg> <span> </span></button>'),Mi=U('<div class="absolute z-10 mt-1 w-full bg-white dark:bg-gray-800 shadow-lg rounded-lg border border-gray-200 dark:border-gray-600 max-h-60 overflow-auto"></div>'),Si=U('<div class="relative w-full"><div class="relative"><div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"><svg class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg></div> <input type="text" autocomplete="off" spellcheck="false"/> <!></div> <!></div>');function Ji(t,i){Be(i,!1);const e=()=>ge(bi,"$suggestions",s),r=()=>ge(_t,"$searchQuery",s),[s,n]=ei();let h=dt(i,"placeholder",8,"Search publications..."),l=dt(i,"redirectOnSearch",8,!0),o=dt(i,"showClearButton",8,!0),f=dt(i,"size",8,"md");const u=qe();let c=zt(),d=zt(!1),a=zt(-1),m=zt(!1);ti(()=>{Y(m,!0)});const g={sm:"text-sm px-3 py-2",md:"text-base px-4 py-3",lg:"text-lg px-6 py-4"};function p(C){const E=C.target.value;E.length>=2?(Y(d,!0),Y(a,-1)):Y(d,!1),clearTimeout(v),v=setTimeout(()=>{E.trim()?(Gt(E),u("search",{query:E})):(ze(),u("clear"))},300)}let v;function y(C){if(!(!I(d)||e().length===0))switch(C.key){case"ArrowDown":C.preventDefault(),Y(a,Math.min(I(a)+1,e().length-1));break;case"ArrowUp":C.preventDefault(),Y(a,Math.max(I(a)-1,-1));break;case"Enter":C.preventDefault(),I(a)>=0?_(e()[I(a)]):S();break;case"Escape":Y(d,!1),Y(a,-1);break}}function _(C){pe(_t,C),Zt(c,I(c).value=C),Y(d,!1),Y(a,-1),Gt(C),u("search",{query:C}),l()&&de(`${me}/publications`)}function S(){const C=I(c).value.trim();C&&(Y(d,!1),Gt(C),u("search",{query:C}),l()&&de(`${me}/publications`))}function z(){pe(_t,""),Zt(c,I(c).value=""),Y(d,!1),ze(),u("clear"),I(c).focus()}function A(){r()&&e().length>0&&Y(d,!0)}function M(){setTimeout(()=>{Y(d,!1),Y(a,-1)},150)}Ie(()=>(I(m),I(c),r()),()=>{I(m)&&I(c)&&r()!==I(c).value&&Zt(c,I(c).value=r())}),Oe(),He();var k=Si(),j=N(k),$=Z(N(j),2);let B;si($,C=>Y(c,C),()=>I(c));var W=Z($,2);{var V=C=>{var X=_i();ft("click",X,z),G(C,X)};lt(W,C=>{o()&&r()&&C(V)})}R(j);var Q=Z(j,2);{var P=C=>{var X=Mi();Pe(X,5,e,Te,(E,gt,st)=>{var b=ji();let O;var L=Z(N(b),2),w=N(L,!0);R(L),R(b),ot(T=>{O=Wt(b,1,"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200 flex items-center space-x-3",null,O,T),q(w,I(gt))},[()=>({"bg-primary-50":st===I(a),"text-primary-600":st===I(a)})]),ft("click",b,()=>_(I(gt))),G(E,b)}),R(X),G(C,X)};lt(Q,C=>{I(d),e(),J(()=>I(d)&&e().length>0)&&C(P)})}R(k),ot(C=>{Ze($,"placeholder",h()),B=Wt($,1,`block w-full rounded-lg border-0 bg-white dark:bg-gray-800 ${K(f()),J(()=>g[f()])??""} pl-10 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500 ring-1 ring-inset ring-gray-300 dark:ring-gray-600 focus:ring-2 focus:ring-inset focus:ring-primary-600 dark:focus:ring-primary-500 transition-colors duration-200`,null,B,C)},[()=>({"pr-10":o()&&r()})]),ft("input",$,p),ft("keydown",$,y),ft("focus",$,A),ft("blur",$,M),G(t,k),$e(),n()}var Ai=U('<div class="flex items-center space-x-1 text-sm text-gray-500 dark:text-gray-400"><svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z"></path></svg> <span> </span></div>'),Ci=U('<p class="text-sm text-gray-700 dark:text-gray-300 mb-4 leading-relaxed"> </p>'),zi=U('<span class="inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"> </span>'),Bi=U('<span class="inline-flex items-center px-2 py-1 rounded-md text-xs font-medium text-gray-500 dark:text-gray-400"> </span>'),Ii=U('<div class="flex flex-wrap gap-1.5 mb-4"><!> <!></div>'),Oi=U('<div class="flex items-center space-x-1"><svg class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"></path></svg> <span> </span></div>'),$i=U('<div class="flex items-center space-x-1"><svg class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"></path></svg> <span> </span></div>'),Pi=U('<div class="flex items-center space-x-1 text-xs text-primary-600 dark:text-primary-400"><span>View paper</span> <svg class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></div>'),Ti=U('<article><div class="flex items-start justify-between mb-3"><div class="flex items-center space-x-3"><span> </span> <span class="text-sm text-gray-500 dark:text-gray-400"> </span></div> <!></div> <h3> </h3> <p class="text-sm text-gray-600 dark:text-gray-400 mb-3"> </p> <!> <!> <div class="flex items-center justify-between pt-3 border-t border-gray-100 dark:border-gray-700"><div class="flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400"><!> <!></div> <!></div></article>');function Fi(t,i){Be(i,!1);const e=zt();let r=dt(i,"paper",8),s=dt(i,"showAbstract",8,!1),n=dt(i,"compact",8,!1);function h(b){return b.length<=3?b.join(", "):`${b.slice(0,3).join(", ")}, et al.`}function l(b,O=150){return b.length<=O?b:b.substring(0,O)+"..."}function o(){if(r().url||r().doi){const b=r().url||`https://doi.org/${r().doi}`;window.open(b,"_blank","noopener,noreferrer")}}function f(b){(b.key==="Enter"||b.key===" ")&&(b.preventDefault(),o())}Ie(()=>K(r()),()=>{Y(e,r().url||r().doi)}),Oe(),He();var u=Ti();Ee(u,b=>({class:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 transition-all duration-200 hover:border-gray-300 dark:hover:border-gray-600",role:I(e)?"button":"article",...I(e)?{tabindex:0}:{},"aria-label":(I(e),K(r()),J(()=>I(e)?`Open paper: ${r().title}`:void 0)),[Xe]:b}),[()=>({"shadow-sm":!n(),"shadow-lg":n(),"hover:shadow-md":!n()&&I(e),"hover:shadow-xl":n()&&I(e),"cursor-pointer":I(e),"p-6":!n(),"p-4":n()})]);var c=N(u),d=N(c),a=N(d);let m;var g=N(a,!0);R(a);var p=Z(a,2),v=N(p,!0);R(p),R(d);var y=Z(d,2);{var _=b=>{var O=Ai(),L=Z(N(O),2),w=N(L,!0);R(L),R(O),ot(()=>q(w,(K(r()),J(()=>r().citations)))),G(b,O)};lt(y,b=>{K(r()),J(()=>r().citations>0)&&b(_)})}R(c);var S=Z(c,2);let z;var A=N(S,!0);R(S);var M=Z(S,2),k=N(M,!0);R(M);var j=Z(M,2);{var $=b=>{var O=Ci(),L=N(O,!0);R(O),ot(w=>q(L,w),[()=>(K(n()),K(r()),J(()=>n()?l(r().abstract):r().abstract))]),G(b,O)};lt(j,b=>{K(s()),K(r()),J(()=>s()&&r().abstract)&&b($)})}var B=Z(j,2);{var W=b=>{var O=Ii(),L=N(O);Pe(L,1,()=>(K(r()),K(n()),J(()=>r().keywords.slice(0,n()?3:6))),Te,(nt,St)=>{var At=zi(),Ye=N(At,!0);R(At),ot(()=>q(Ye,I(St))),G(nt,At)});var w=Z(L,2);{var T=nt=>{var St=Bi(),At=N(St);R(St),ot(()=>q(At,`+${K(r()),K(n()),J(()=>r().keywords.length-(n()?3:6))??""} more`)),G(nt,St)};lt(w,nt=>{K(r()),K(n()),J(()=>r().keywords.length>(n()?3:6))&&nt(T)})}R(O),G(b,O)};lt(B,b=>{K(r()),J(()=>r().keywords.length>0)&&b(W)})}var V=Z(B,2),Q=N(V),P=N(Q);{var C=b=>{var O=Oi(),L=Z(N(O),2),w=N(L,!0);R(L),R(O),ot(()=>q(w,(K(r()),J(()=>r().location)))),G(b,O)};lt(P,b=>{K(r()),J(()=>r().location)&&b(C)})}var X=Z(P,2);{var E=b=>{var O=$i(),L=Z(N(O),2),w=N(L);R(L),R(O),ot(()=>q(w,`pp. ${K(r()),J(()=>r().pages)??""}`)),G(b,O)};lt(X,b=>{K(r()),J(()=>r().pages)&&b(E)})}R(Q);var gt=Z(Q,2);{var st=b=>{var O=Pi();G(b,O)};lt(gt,b=>{I(e)&&b(st)})}R(V),R(u),ot((b,O,L,w)=>{m=Wt(a,1,"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",null,m,b),q(g,O),q(v,(K(r()),J(()=>r().year))),z=Wt(S,1,"font-semibold text-gray-900 dark:text-white leading-tight mb-3",null,z,L),q(A,(K(r()),J(()=>r().title))),q(k,w)},[()=>({"bg-primary-100":r().conference==="AH","text-primary-800":r().conference==="AH","bg-purple-100":r().conference==="AHS","text-purple-800":r().conference==="AHS"}),()=>(K(r()),J(()=>r().conferenceYear||`${r().conference} '${r().year.toString().slice(-2)}`)),()=>({"text-lg":!n(),"text-base":n(),"hover:text-primary-600":I(e),"dark:hover:text-primary-400":I(e)}),()=>(K(r()),J(()=>h(r().authors)))]),ft("click",u,function(...b){(I(e)?o:void 0)?.apply(this,b)}),ft("keypress",u,function(...b){(I(e)?f:void 0)?.apply(this,b)}),G(t,u),$e()}export{Fi as P,Ji as S,_t as a,re as l,Bt as s};
